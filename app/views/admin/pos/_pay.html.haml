.pay{ ng: { controller: 'PayController', show: "config.view == 'pay'" } }
  .row
    .small-12.columns
      %h4 Payments
  .row
    .small-12.columns
      .payments.table
        .row.header
          .small-6.columns Payment Method
          .small-2.columns Status
          .small-2.columns.text-right Amount
          .small-2.columns &nbsp;
        .row{ ng: { repeat: 'payment in currentOrder.payments' } }
          .small-6.columns {{ payment.payment_method.name }}
          .small-2.columns {{ payment.state }}
          .small-2.columns.text-right {{ payment.display_amount }}
          .small-2.columns.text-right
            %i.no-text.red.icon-remove
            %i.no-text.green.icon-ok
        .row
          .small-8.columns
            %strong Total Received
          .small-2.columns.text-right
            %strong {{ currentOrder.display_payment_total }}
          .small-2.columns &nbsp;

  %hr.margin-bottom-30

  .row{ ng: { hide: 'currentOrder.outstanding_balance == 0' } }
    .small-8.small-centered.columns
      %h4.text-center New Payment
      .row
        .small-4.columns
          Amount To Pay:
        .small-8.columns
          %input{ type: "number", step: '0.01', ng: { model: 'payment.amount' } }
      .row
        .small-4.columns
          Amount Tendered:
        .small-8.columns
          %input{ type: "number", step: '0.01', ng: { model: 'amountTendered' } }
      .row
        .small-4.columns
          Change Owed:
        .small-8.columns
          %input{ type: "number", step: '0.01', disabled: true, ng: { model: "changeOwed" } }
      .row
        .small-6.columns
          %a.red.button.fullwidth{ href: '#', data: { reveal: { id: "pay-modal" } } }
            %i.icon-ok
            Pay
        .small-6.columns
          %a.button.green.fullwidth{ href: 'javascript:void(0)', ng: { click: "config.view = 'products'"} }
            %i.icon-chevron-left
            Back to Products
  %div{ ng: { show: 'currentOrder.outstanding_balance == 0' } }
    .row
      .small-12.columns.text-center
        %h3.paid-in-full.margin-bottom-30
          This order has been paid for in full
          %i.icon-ok
    .row
      .small-6.columns.small-centered
        %a.button.green.fullwidth{ href: 'javascript:void(0)', ng: { click: "config.view = 'products'"} }
          %i.icon-chevron-left
          Back to Products


  #pay-modal.small.reveal-modal{ aria: { hidden: "true" }, data: { reveal: true }, role: "dialog" }
    .row
      .small-12.columns.text-center
        %h4 Pay {{ payment.amount | currency }} Via:
    .row{ ng: { repeat: 'paymentMethod in paymentMethods' } }
      .small-8.columns.small-centered
        %a.button.payment-method.fullwidth{ ng: { click: 'payment.payment_method_id = paymentMethod.id',
          class: '{selected: payment.payment_method_id == paymentMethod.id}' },
          href: "javascript:void(0)" }
          {{ paymentMethod.name }}
          %i.icon-ok{ ng: { show: "payment.payment_method_id == paymentMethod.id" } }
    .row
      .small-6.columns
        %a.button.fullwidth.red{ ng: { click: 'createPayment()', class: '{disabled: !payment.payment_method_id}', hide: 'inProgress' } }
          Pay Now
        %div{ ng: { show: 'inProgress' } }
          Processing Payment
          %img.spinner.small{ src: "/assets/spinning-circles.svg" }
    %a.close-reveal-modal{ aria: { label: "Close" } } Ã—


  -#
  -# .row
  -#   .small-12.columns.text-center
  -#     %h4 Pay Now Via
  -# .row
  -#   .small-8.small-centered.columns
  -#     .row
  -#       .small-3.columns
  -#         %a.button.small.fullwidth
  -#           Cash
  -#       .small-3.columns
  -#         %a.button.small.fullwidth
  -#           Card
  -#       .small-3.columns
  -#         %a.button.small.fullwidth
  -#           EFT
  -#       .small-3.columns
  -#         %a.button.small.fullwidth
  -#           Account
